<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>kipa-project_digitrans</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="KIPA Project_DigiTrans_files/libs/clipboard/clipboard.min.js"></script>
<script src="KIPA Project_DigiTrans_files/libs/quarto-html/quarto.js"></script>
<script src="KIPA Project_DigiTrans_files/libs/quarto-html/popper.min.js"></script>
<script src="KIPA Project_DigiTrans_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="KIPA Project_DigiTrans_files/libs/quarto-html/anchor.min.js"></script>
<link href="KIPA Project_DigiTrans_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="KIPA Project_DigiTrans_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="KIPA Project_DigiTrans_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="KIPA Project_DigiTrans_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="KIPA Project_DigiTrans_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<h1>
KIPA PROJECT
</h1>
<h3 class="anchored">
MDSSB-DSAI-01 DIGITAL TRANSFORMATION
</h3>
<p>Aiman Alam | Modou Lamin Manjang | Husnain Dawood | Niloufar Shokri | Sergey Polyarus | Suraj Karakulath</p>
<p>We want to find correlations/patterns between the price of waste (bought from suppliers) and various potential price determinants such as weather, energy, business cycle, Euwid and Quantities.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Importing libraries (include plotly)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Pricing dataset </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_excel(<span class="st">'df.xlsx'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>week</th>
      <th>wPreis</th>
      <th>Plz</th>
      <th>full</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-37</td>
      <td>-37.519318</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-09-14</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-39</td>
      <td>-40.000000</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-09-28</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-41</td>
      <td>-34.853543</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-10-12</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-42</td>
      <td>-27.560202</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-10-19</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-43</td>
      <td>-31.937780</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-10-26</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Quick Exploration of Pricing Dataset</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 3379 entries, 0 to 3378
Data columns (total 5 columns):
 #   Column  Non-Null Count  Dtype         
---  ------  --------------  -----         
 0   week    3379 non-null   object        
 1   wPreis  3379 non-null   float64       
 2   Plz     3379 non-null   object        
 3   full    3379 non-null   object        
 4   date    3379 non-null   datetime64[ns]
dtypes: datetime64[ns](1), float64(1), object(3)
memory usage: 132.1+ KB</code></pre>
</div>
</div>
<p>There are no null values in any of the 3379 observations.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Plz'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>array(["['25', '24']", "['26', '27', '28']", "['20', '21', '22', '23']",
       "['29', '30', '31', '38', '39']",
       "['10', '11', '12', '13', '14', '15', '16']", "['48', '49']",
       "['1', '4', '6', '7', '8', '9']",
       "['40', '41', '42', '44', '45', '46', '47']",
       "['50', '51', '52', '53']",
       "['80', '81', '82', '83', '84', '85', '93', '94']"], dtype=object)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(df[<span class="st">'Plz'</span>].unique())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>10</code></pre>
</div>
</div>
<p>There are 10 unique clusters.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'full'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>array(['A2 -  geschreddert', 'A1 &amp; A2 -  geschreddert',
       'A2 &amp; A3 -  geschreddert', 'A3 -  geschreddert'], dtype=object)</code></pre>
</div>
</div>
<p>And 4 unique product categories.</p>
<p>“[‘10’, ‘11’, ‘12’, ‘13’, ‘14’, ‘15’, ‘16’]”, “[‘48’, ‘49’]”</p>
<p>We explore a few clusters by splitting among ourselves as: [Monday 13:25] Shokri, Niloufar</p>
<ul>
<li>Nilou: [‘25’, ‘24’]“,”[‘26’, ‘27’, ‘28’]“,”[‘20’, ‘21’, ‘22’, ‘23’]</li>
<li>Aiman: “[‘29’, ‘30’, ‘31’, ‘38’, ‘39’]</li>
<li>Suraj: “[‘10’, ‘11’, ‘12’, ‘13’, ‘14’, ‘15’, ‘16’]”, “[‘48’, ‘49’]</li>
<li>Momo: “[‘1’, ‘4’, ‘6’, ‘7’, ‘8’, ‘9’]</li>
</ul>
<p>Looking at the [‘25’,‘24’] cluster for the product category ‘A2 - geschreddert’ first.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>TS1 <span class="op">=</span> df[(df[<span class="st">'Plz'</span>] <span class="op">==</span> <span class="st">"['25', '24']"</span>)]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>TS1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>week</th>
      <th>wPreis</th>
      <th>Plz</th>
      <th>full</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-37</td>
      <td>-37.519318</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-09-14</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-39</td>
      <td>-40.000000</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-09-28</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-41</td>
      <td>-34.853543</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-10-12</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-42</td>
      <td>-27.560202</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-10-19</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-43</td>
      <td>-31.937780</td>
      <td>['25', '24']</td>
      <td>A2 -  geschreddert</td>
      <td>2020-10-26</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(TS1, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span><span class="st">'wPreis'</span>, color<span class="op">=</span><span class="st">'full'</span>, title<span class="op">=</span><span class="st">'Weekly Prices for [25,24] by Category'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>TS2 <span class="op">=</span> df[(df[<span class="st">'Plz'</span>] <span class="op">==</span> <span class="st">"['26', '27', '28']"</span>)]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>TS2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>week</th>
      <th>wPreis</th>
      <th>Plz</th>
      <th>full</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>464</th>
      <td>2020-37</td>
      <td>-28.311162</td>
      <td>['26', '27', '28']</td>
      <td>A3 -  geschreddert</td>
      <td>2020-09-14</td>
    </tr>
    <tr>
      <th>465</th>
      <td>2020-38</td>
      <td>-31.281060</td>
      <td>['26', '27', '28']</td>
      <td>A3 -  geschreddert</td>
      <td>2020-09-21</td>
    </tr>
    <tr>
      <th>466</th>
      <td>2020-39</td>
      <td>-32.255530</td>
      <td>['26', '27', '28']</td>
      <td>A3 -  geschreddert</td>
      <td>2020-09-28</td>
    </tr>
    <tr>
      <th>467</th>
      <td>2020-40</td>
      <td>-28.939862</td>
      <td>['26', '27', '28']</td>
      <td>A3 -  geschreddert</td>
      <td>2020-10-05</td>
    </tr>
    <tr>
      <th>468</th>
      <td>2020-41</td>
      <td>-30.470931</td>
      <td>['26', '27', '28']</td>
      <td>A3 -  geschreddert</td>
      <td>2020-10-12</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(TS2, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span><span class="st">'wPreis'</span>, color<span class="op">=</span><span class="st">'full'</span>, title<span class="op">=</span><span class="st">'Weekly Prices for [26,27,28] by Category'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>TS3 <span class="op">=</span> df[(df[<span class="st">'Plz'</span>] <span class="op">==</span> <span class="st">"['20', '21', '22', '23']"</span>)]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(TS3, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span><span class="st">'wPreis'</span>, color<span class="op">=</span><span class="st">'full'</span>, title<span class="op">=</span><span class="st">'Weekly Prices for [20,21,22,23] by Product Category'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>TS4 <span class="op">=</span> df[(df[<span class="st">'Plz'</span>] <span class="op">==</span> <span class="st">"['10', '11', '12', '13', '14', '15', '16']"</span>)]  </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(TS4, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span><span class="st">'wPreis'</span>, color<span class="op">=</span><span class="st">'full'</span>, title<span class="op">=</span><span class="st">'Weekly Prices for [10, 11, 12, 13, 14, 15, 16] by Category'</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>TS5 <span class="op">=</span> df[(df[<span class="st">'Plz'</span>] <span class="op">==</span> <span class="st">"['48', '49']"</span>)]  </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(TS5, x<span class="op">=</span><span class="st">'date'</span>, y<span class="op">=</span><span class="st">'wPreis'</span>, color<span class="op">=</span><span class="st">'full'</span>, title<span class="op">=</span><span class="st">'Weekly Prices for [48, 49] by Category'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<p>The wPreis of categories in the same cluster follow a similar series, almost identical.</p>
<h3 class="anchored">
Exploring Potential Price Determinants
</h3>
<ol type="1">
<li>Energy (Electricity, Oil and Gas)</li>
</ol>
<p>Oil first. - We do not have access to any data that has oil prices per region in Germany (it may not make sense either) - So we look at Global Oil and Gas Market Prices as a proxy from Yahoo finance https://finance.yahoo.com/quote/CL%3DF/history?period1=1599436800&amp;period2=1694649600&amp;interval=1wk&amp;filter=history&amp;frequency=1wk&amp;includeAdjustedClose=true (No download option but can copy and paste into excel) - And assume that relative changes in global prices have a proportional impact on the same prices in Germany</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Oil</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>oil <span class="op">=</span> pd.read_excel(<span class="st">'Crude_oil.xlsx'</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>oil.head() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close*</th>
      <th>Adj Close**</th>
      <th>Volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sep 11, 2023</td>
      <td>87.40</td>
      <td>89.64</td>
      <td>86.71</td>
      <td>88.52</td>
      <td>88.52</td>
      <td>974.662</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Sep 04, 2023</td>
      <td>86.06</td>
      <td>88.08</td>
      <td>85.02</td>
      <td>87.51</td>
      <td>87.51</td>
      <td>1,325,196</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Aug 28, 2023</td>
      <td>80.15</td>
      <td>86.06</td>
      <td>79.34</td>
      <td>85.55</td>
      <td>85.55</td>
      <td>1,619,479</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Aug 21, 2023</td>
      <td>81.43</td>
      <td>82.47</td>
      <td>77.59</td>
      <td>79.83</td>
      <td>79.83</td>
      <td>1,542,148</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Aug 14, 2023</td>
      <td>83.09</td>
      <td>83.20</td>
      <td>78.95</td>
      <td>81.25</td>
      <td>81.25</td>
      <td>1,269,633</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>When exploring correlations between weekly oil prices and the price of another commodity like waste, the “Close” or “Adj Close” price is often used.</p>
<p>Close Price: The “Close” price represents the closing price of the commodity for a specific trading day. It is the last price at which a trade occurred before the market closed for that day. This is a commonly used price metric for historical price analysis.</p>
<p>Adjusted Close Price (Adj Close): The “Adj Close” price accounts for events such as stock splits and dividend payments. It is often considered more accurate for long-term analysis because it adjusts for corporate actions that can affect the price. In the context of Crude Oil, if there are similar adjustments, the “Adj Close” can be a better choice for long-term correlations.</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>oil.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 158 entries, 0 to 157
Data columns (total 7 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   Date         158 non-null    object 
 1   Open         158 non-null    float64
 2   High         158 non-null    float64
 3   Low          158 non-null    float64
 4   Close*       158 non-null    float64
 5   Adj Close**  158 non-null    float64
 6   Volume       158 non-null    object 
dtypes: float64(5), object(2)
memory usage: 8.8+ KB</code></pre>
</div>
</div>
<p>158 entries for each week and no null values.</p>
<p>Transformation: Date here is in an object format so we convert it to datetime64[ns]</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>oil[<span class="st">"Date"</span>] <span class="op">=</span> pd.to_datetime(oil[<span class="st">"Date"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>oil.sort_values(by<span class="op">=</span><span class="st">'Date'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close*</th>
      <th>Adj Close**</th>
      <th>Volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>157</th>
      <td>2020-09-07</td>
      <td>39.48</td>
      <td>39.59</td>
      <td>36.13</td>
      <td>37.33</td>
      <td>37.33</td>
      <td>1,907,673</td>
    </tr>
    <tr>
      <th>156</th>
      <td>2020-09-14</td>
      <td>37.32</td>
      <td>41.49</td>
      <td>36.82</td>
      <td>41.11</td>
      <td>41.11</td>
      <td>1,430,611</td>
    </tr>
    <tr>
      <th>155</th>
      <td>2020-09-21</td>
      <td>40.98</td>
      <td>41.27</td>
      <td>38.66</td>
      <td>40.25</td>
      <td>40.25</td>
      <td>1,171,773</td>
    </tr>
    <tr>
      <th>154</th>
      <td>2020-09-28</td>
      <td>40.07</td>
      <td>40.80</td>
      <td>36.63</td>
      <td>37.05</td>
      <td>37.05</td>
      <td>1,781,188</td>
    </tr>
    <tr>
      <th>153</th>
      <td>2020-10-05</td>
      <td>37.00</td>
      <td>41.47</td>
      <td>37.00</td>
      <td>40.60</td>
      <td>40.60</td>
      <td>1,953,665</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2023-08-14</td>
      <td>83.09</td>
      <td>83.20</td>
      <td>78.95</td>
      <td>81.25</td>
      <td>81.25</td>
      <td>1,269,633</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2023-08-21</td>
      <td>81.43</td>
      <td>82.47</td>
      <td>77.59</td>
      <td>79.83</td>
      <td>79.83</td>
      <td>1,542,148</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2023-08-28</td>
      <td>80.15</td>
      <td>86.06</td>
      <td>79.34</td>
      <td>85.55</td>
      <td>85.55</td>
      <td>1,619,479</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2023-09-04</td>
      <td>86.06</td>
      <td>88.08</td>
      <td>85.02</td>
      <td>87.51</td>
      <td>87.51</td>
      <td>1,325,196</td>
    </tr>
    <tr>
      <th>0</th>
      <td>2023-09-11</td>
      <td>87.40</td>
      <td>89.64</td>
      <td>86.71</td>
      <td>88.52</td>
      <td>88.52</td>
      <td>974.662</td>
    </tr>
  </tbody>
</table>
<p>158 rows × 7 columns</p>
</div>
</div>
</div>
<p>Quick look at the distribution of crude oil prices (Adj Close)</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(oil, x<span class="op">=</span><span class="st">'Date'</span>, y<span class="op">=</span><span class="st">'Adj Close**'</span>, title<span class="op">=</span><span class="st">'Weekly Adjusted Close Price for Crude Oil'</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<p>Now exploring the correlation of this Adjusted Close Price with the wPreis of one of the clusters (48,49): For this we combine the 2 dataframes (TS5 and oil) - INNER JOIN by the ‘date’ variable in TS5 and ‘Date’ variable in oil (which has been transformed)</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>combined_df <span class="op">=</span> pd.merge(TS5[[<span class="st">'date'</span>, <span class="st">'wPreis'</span>, <span class="st">'full'</span>]], oil[[<span class="st">'Date'</span>, <span class="st">'Adj Close**'</span>]], left_on<span class="op">=</span><span class="st">'date'</span>, right_on<span class="op">=</span><span class="st">'Date'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># And drop the duplicate 'Date' column </span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>combined_df <span class="op">=</span> combined_df.drop(columns<span class="op">=</span><span class="st">'Date'</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>combined_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>date</th>
      <th>wPreis</th>
      <th>full</th>
      <th>Adj Close**</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-09-14</td>
      <td>-29.244584</td>
      <td>A3 -  geschreddert</td>
      <td>41.11</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-09-14</td>
      <td>-29.244584</td>
      <td>A2 &amp; A3 -  geschreddert</td>
      <td>41.11</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-09-21</td>
      <td>-27.878925</td>
      <td>A3 -  geschreddert</td>
      <td>40.25</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-09-21</td>
      <td>-27.878925</td>
      <td>A2 &amp; A3 -  geschreddert</td>
      <td>40.25</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-09-28</td>
      <td>-25.077400</td>
      <td>A3 -  geschreddert</td>
      <td>37.05</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>295</th>
      <td>2023-08-21</td>
      <td>4.426446</td>
      <td>A2 &amp; A3 -  geschreddert</td>
      <td>79.83</td>
    </tr>
    <tr>
      <th>296</th>
      <td>2023-08-28</td>
      <td>5.545975</td>
      <td>A3 -  geschreddert</td>
      <td>85.55</td>
    </tr>
    <tr>
      <th>297</th>
      <td>2023-08-28</td>
      <td>5.545975</td>
      <td>A2 &amp; A3 -  geschreddert</td>
      <td>85.55</td>
    </tr>
    <tr>
      <th>298</th>
      <td>2023-09-04</td>
      <td>8.037723</td>
      <td>A3 -  geschreddert</td>
      <td>87.51</td>
    </tr>
    <tr>
      <th>299</th>
      <td>2023-09-04</td>
      <td>7.739649</td>
      <td>A2 &amp; A3 -  geschreddert</td>
      <td>87.51</td>
    </tr>
  </tbody>
</table>
<p>300 rows × 4 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get unique categories</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> combined_df[<span class="st">'full'</span>].unique()</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Plotly figure</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each category and add a trace for it</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> category <span class="kw">in</span> categories:</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    category_data <span class="op">=</span> combined_df[combined_df[<span class="st">'full'</span>] <span class="op">==</span> category]</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(go.Scatter(x<span class="op">=</span>category_data[<span class="st">'date'</span>], y<span class="op">=</span>category_data[<span class="st">'wPreis'</span>], mode<span class="op">=</span><span class="st">'lines'</span>, name<span class="op">=</span><span class="ss">f'wPreis (</span><span class="sc">{</span>category<span class="sc">}</span><span class="ss">)'</span>))</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(go.Scatter(x<span class="op">=</span>category_data[<span class="st">'date'</span>], y<span class="op">=</span>category_data[<span class="st">'Adj Close**'</span>], mode<span class="op">=</span><span class="st">'lines'</span>, name<span class="op">=</span><span class="ss">f'Adj Close** (</span><span class="sc">{</span>category<span class="sc">}</span><span class="ss">)'</span>))</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the layout</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Time Series Comparison by Category for the cluster [48,49]"</span>,</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">"Date"</span>,</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span><span class="st">"Value"</span>,</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    xaxis<span class="op">=</span><span class="bu">dict</span>(<span class="bu">type</span><span class="op">=</span><span class="st">'date'</span>),</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the legend</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>fig.update_layout(showlegend<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<p>Some quick observations (purely from visualization): - The wPreis and Adj Close price of Crude oil for both categories seem to be closely correlated from Sep 2020 to around Jan 2022. - For Category A3 - geschreddert, the correlation roughly continues unti June 2022 after which it becomes an inverse correlation until December 2022 and then low correlation until Sep 2023 - For Category A2 &amp; A3 - geschreddert, the correlation continues from Jan 2022 to around March 2022 after which they slowly become inverse correlated until Dec 2022, and similar to the other category, loses the correlation after that.</p>
<p>Something remained consistent until Jan 2022. After that things began going in the opposite direction. And from Dec 2022 onwards they become less correlated.</p>
<p>More investigation needed to explore further.</p>
<ol start="2" type="1">
<li><p>Weather (Wind, Temp)</p></li>
<li><p>Business Cycle (DAX)</p></li>
</ol>
<p>MORE…</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>